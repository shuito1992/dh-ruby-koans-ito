正規表現に関するメモ

タイトル「RubyKoansの正規表現」

こんにちは。ダイアモンドヘッド札幌に入社予定の伊藤です。今日は研修課題で取り組んだRubyの正規表現について書かせていただきます。

内定者研修ということで、Koansを利用してRubyを学んでいます。
http://rubykoans.com/
Koansとは「考案」という日本語から来たタイトルであり、プログラムの穴や間違いを修正するクイズを解いていく中で、自然とプログラミングの知識を身に着けていくという教材です。
最初の1/3の中で、一番調べものをしたのが正規表現のチャプターだったので、調べたことをまとめて共有しようと思います。

koansでは以下のように問題が与えられ、「__」の部分を正しいものに直していきます。
    > def test_a_regexp_can_search_a_string_for_matching_content
    >   assert_equal "__", "some matching content"[/match/]
    > end
ここでは「match」が答えとなります。

正規表現(Regular Expression)とは、文字列とのマッチングを行うときに利用する「パターン」の記法のことです。指定するときは「/」で文字列を囲います。

正規表現にはメタ文字という、特殊な意味を持つ文字が存在します。今回使ったものをメモとして列挙しておきます。

主なメタ文字
「?」 - 直前の文字が0個か1個
「+」 - 直前の文字が1個以上
「*」 - 直前の文字が0個以上
「.」 - 任意の1文字
「^」 - 行頭指定
「$」 - 行末指定
「()」 - 複数の文字列をひとつの単位として扱う
「|」 - または
「[^~]」 - 「~」で指定されたもの以外の文字列

バックスラッシュを使った特殊パターン
「\d」 - 数字[0123456789] = [0-9]
「\w」 - 英数字[a-zA-Z0-9] 
「\s」 - 空白文字(スペース、タブ、改行、改ページ)
「\D」「\W」「\S」 - 大文字で否定を表す。それぞれ、数字以外、英数字以外、空白文字以外
「\b」 - バックスペース
「\t」 - タブ
「\n」 - 改行
「\A」 - 文字列の先頭
「\z」 - 文字列の末尾
「\メタ文字」 - メタ文字を文字として利用したいときはバックスラッシュをつけて使う。

*「行頭・行末」と「文字列の先頭・末尾」は少し違いがあります。
文字列が以下のようなものだった場合、
    > text = '''I have a pen
    >       you have an apple'''
途中で改行が入っているため、2回の「行頭(I,you)・行末(pen,apple)」があります。
それに対して文字列の先頭(I)と末尾(apple)は常にひとつだけです。
